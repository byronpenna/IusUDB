@using IUSLibs.RRHH.Entidades.Laboral
@section estilosPersonalizados{
    <!-- plugins -->
        <!--Data table-->
            <link rel="stylesheet" href="~/Content/third-party/datatable/css/jquery.dataTables.min.css" />
        <!-- chosen -->
            <link rel="stylesheet" href="~/Content/third-party/chosen/css/chosen.min.css" />
    <!-- Propios -->
        <link rel="stylesheet" href="~/Content/themes/iusback_theme/views/GestionPersonas/laboral/style.css" />
        <link rel="stylesheet" href="~/Content/themes/iusback_theme/views/GestionPersonas/laboral/media.css" />
}
@section scriptsPersonalizados{
    <!-- plugins -->
        <!-- Data table -->
            <script src="~/Content/third-party/datatable/js/jquery.dataTables.js"></script>    
        <!-- chosen -->
            <script src="~/Content/third-party/chosen/js/chosen.jquery.min.js"></script>
    <!-- propios -->
        <script src="~/Scripts/Views/GestionPersonas/Laboral/script.js"></script>
        <script src="~/Scripts/Views/GestionPersonas/Laboral/functions.js"></script>
}

@{
    List<Empresa> empresas = null; List<CargoEmpresa> cargos = null;
    List<LaboralPersona> laboralesPersonas = null;
    try{
        Dictionary<object,object> 
            iniciales = (Dictionary<object,object>)ViewBag.iniciales;
            empresas  = (List<Empresa>)iniciales["empresas"];
            cargos    = (List<CargoEmpresa>)iniciales["cargos"];
            laboralesPersonas = (List<LaboralPersona>)iniciales["laboralesPersonas"];
    }catch(Exception){
        
    }
}
@section tabs{
    <ul>
        <a href="@Url.Action("Extras", "GestionPersonas", new { id = ViewBag.idPersona })">
            <li>
                Informacion
            </li>
        </a>
        <a href="@Url.Action("Index", "FormacionPersonas", new {id=ViewBag.idPersona })">
            <li>
                Formacion
            </li>
        </a>
        <li class="btnTab tabActive">
            Laboral
        </li>
    </ul>

}
<h2>GestionLaboral</h2>
<input type="hidden" class="txtHdIdPersona" value="@ViewBag.idPersona" />
<table class="table tablaLaboral">
    <thead>
        <tr>
            <th class="hidden"></th>
            <th>Empresa</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Observaciones</th>
            <th>Cargo desempeñado</th>
            <th>Acciones</th>
        </tr>
        <tr>
            <th class="hidden"></th>
            <th>
                <select class="form-control cbEmpresa" name="cbEmpresa">
                    @if (empresas != null && empresas.Count > 0)
                    {
                        foreach (Empresa empresa in empresas)
                        {
                            <option value="@empresa._idEmpresa">@empresa._nombre</option>
                        }
                    }
                </select>
            </th>
            <th>
                <input type="number" class="form-control txtInicio" name="txtInicio" />
            </th>
            <th>
                <input type="number" class="form-control txtFin" name="txtFin" />
            </th>
            <th>
                <textarea class="form-control txtAreaObservacion" name="txtAreaObservacion"></textarea>
            </th>
            <th>
                <select class="form-control cbCargo" name="cbCargo">
                    @if (cargos != null && cargos.Count > 0)
                    {
                        foreach (CargoEmpresa cargo in cargos)
                        {
                            <option value="@cargo._idCargoEmpresa">@cargo._cargo</option>
                        }
                    }
                </select>
            </th>
            <th>
                <button class="btn btnAgregarLaboralPersona">Agregar</button>
            </th>
        </tr>
    </thead>
    <tbody class="tbodyLaboralPersona">
        @if (laboralesPersonas != null && laboralesPersonas.Count > 0)
        {
            foreach (LaboralPersona laboralPersona in laboralesPersonas)
            {
                <tr>
                    <td class="hidden">
                        <input type="hidden" value="@laboralPersona._idLaboralPersona" class="txtHdIdLaboralPersona" name="txtHdIdLaboralPersona" />
                        <input type="hidden" value="@laboralPersona._empresa._idEmpresa" class="txtHdIdEmpresa" name="txtHdIdEmpresa">
                        <input type="hidden" value="@laboralPersona._cargo._idCargoEmpresa" class="txtHdIdCargoEmpresa" name="txtHdIdCargoEmpresa">
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <select class="form-control cbEmpresa" name="cbEmpresa">

                            </select>
                        </div>
                        <div class="normalMode tdNombreEmpresa">
                            @laboralPersona._empresa._nombre
                        </div>
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <input type="number" class="form-control txtInicio" name="txtInicio" />
                        </div>
                        <div class="normalMode tdFechaInicio">
                            @laboralPersona._inicio
                        </div>
                        
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <input type="number" class="form-control txtFin" name="txtFin" />
                        </div>
                        <div class="normalMode tdFechaFin">
                            @laboralPersona._fin
                        </div>
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <textarea class="form-control txtAreaObservacion" name="txtAreaObservacion"></textarea>
                        </div>
                        <div class="normalMode tdObservaciones">
                            @laboralPersona._observaciones
                        </div>
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <select class="form-control cbCargo" name="cbCargo">

                            </select>
                        </div>
                        <div class="normalMode tdCargo">
                            @laboralPersona._cargo._cargo
                        </div>
                    </td>
                    <td>
                        <div class="editMode hidden">
                            <button class="btn btnActualizarLaboralPersona">Actualizar</button>
                            <button class="btn btnCancelarUni">Cancelar</button>
                        </div>
                        <div class="normalMode tdBotones">
                            <button class="btn btnEditarLaboralPersona btn-sm">Editar</button>
                            <button class="btn btnCargos btn-sm">Cargos desempeñados</button>
                            <button class="btn btnEliminarLaboralPersona btn-sm">Eliminar</button>
                        </div>
                    </td>
                </tr>
                
            }
            
        }
    </tbody>
</table>