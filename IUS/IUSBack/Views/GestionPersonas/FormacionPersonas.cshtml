@using IUSLibs.RRHH.Entidades.Formacion
@using IUSLibs.SEC.Entidades
@using IUSLibs.FrontUI.Entidades
@section estilosPersonalizados{
    <!-- plugins -->

    <!-- Propios -->
        <link rel="stylesheet" href="~/Content/themes/iusback_theme/views/GestionPersonas/FormacionPersonas/style.css" />
        <link rel="stylesheet" href="~/Content/themes/iusback_theme/views/GestionPersonas/FormacionPersonas/media.css" />
}
@section scriptsPersonalizados{
    <!-- propios -->
        <script src="~/Scripts/Views/GestionPersonas/FormacionPersonas/script.js"></script>
        <script src="~/Scripts/Views/GestionPersonas/FormacionPersonas/functions.js"></script>
}
@{
    List<EstadoCarrera> estadosCarrera=null;Persona persona= null;
    List<Pais> paises = null; List<InstitucionEducativa> institucionesEducativas = null;
    List<NivelTitulo> nivelesTitulo = null;
    try{
        Dictionary<object, object> info = (Dictionary<object,object>)ViewBag.infoIni;
        estadosCarrera                  = (List<EstadoCarrera>)info["estadosCarrera"];
        persona                         = (Persona)info["persona"];
        paises                          = (List<Pais>)info["paises"];
        institucionesEducativas         = (List<InstitucionEducativa>)info["instituciones"];
        nivelesTitulo                   = (List<NivelTitulo>)info["nivelesTitulo"];
    }catch(Exception){
        
    }
}
@section tabs{
    <ul>
        <a href="@Url.Action("Extras", "GestionPersonas",new {id=43})">
            <li>
                Informacion
            </li>
        </a>
        <li class="btnTab tabActive">
            Formacion
        </li>
        <a href="@Url.Action("Index","RepositorioPublico")">
            <li>
                Laboral
            </li>
        </a>
    </ul>
    
}
<div class="row marginNull divControles">
    <h2 class="titlePersona">@persona.nombreCompleto</h2>
    <div class="col-lg-offset-5 col-lg-2 text-center">
        <label>Vistas</label>
        <div class="herramientaVistaSection accionesDiv form-control inputBackModal">
            <a href="#" id="divInformacionCarreras" class="icoVista activeVista" title="titulos persona">
                <i class="fa fa-user"></i>
            </a>
            <a href="#" id="divCarreras" class="icoVista" title="Carreras">
                <i class="fa fa-graduation-cap"></i>
            </a>
            <a href="#" id="divInstituciones" class="icoVista" title="Instituciones educativas">
                <i class="fa fa-university"></i>
            </a>
        </div>
    </div>
</div>
<div class="row marginNull divTab divInformacionCarreras">
    <h3 class="tituloTabDiv">Titulos</h3>
    <table class="table tbCarreras">
        <thead>
            <tr>
                <td>Carrera</td>
                <td>Año Inicio</td>
                <td>Año Fin</td>
                <td>Observaciones</td>
                <td>Estado</td>
                <td>Acciones</td>
            </tr>
            <tr>
                <td>
                    <select class="cbCarrera form-control"></select>
                </td>
                <td>
                    <input name="txtYearInicio" class="txtYearInicio form-control" />
                </td>
                <td>
                    <input name="txtYearFin" class="txtYearFin form-control" />
                </td>
                <td>
                    <textarea name="txtAreaObservaciones" class="txtAreaObservaciones form-control"></textarea>
                </td>
                <td>
                    <select name="cbEstadoCarrera" class="cbEstadoCarrera form-control">
                        @if (estadosCarrera != null && estadosCarrera.Count > 0)
                        {
                            foreach (EstadoCarrera estadoCarrera in estadosCarrera)
                            {
                                <option value="@estadoCarrera._idEstadoCarrera">@estadoCarrera._estado</option>
                            }
                        }
                    </select>
                </td>
                <td>
                    <button class="btn btnAgregarCarrera">Agregar</button>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td></td>
            </tr>
        </tbody>
    </table>
</div>
<div class="row marginNull divTab divInstituciones hidden">
    <h3 class="tituloTabDiv">Instituciones educativas</h3>
    <table class="table">
       <thead>
           <tr>
               <th>Institucion educativa</th>
               <th>País</th>
               <th>Acciones</th>
           </tr>
           <tr>
               <th>
                   <input name="txtInstitucionEducativa" class="form-control txtInstitucionEducativa" />
               </th>
               <th>
                   <select name="cbPaisInstitucionEducativa" class="form-control cbPaisInstitucionEducativa">
                       @if(paises != null && paises.Count> 0){
                           foreach(Pais pais in paises){
                               <option value="@pais._idPais">@pais._pais</option>
                           }
                       }
                   </select>
               </th>
               <th>
                   <button class="btn btnAgregarInstitucion">Agregar institucion</button>
               </th>
           </tr>
       </thead>
       <tbody>
           
       </tbody>
   </table>
</div>
<div class="row marginNull divTab divCarreras hidden">
    <h3 class="tituloTabDiv">Carreras</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Nombre carrera</th>
                <th>Nivel carrera</th>
                <th>Institucion</th>
                <th>Acciones</th>
            </tr>
            <tr>
                <th>
                <input name="txtNombreCarrera" class="txtNombreCarrera form-control" /></th>
                <th>
                    <select name="cbNivelCarrera" class="cbNivelCarrera form-control">
                        @if (nivelesTitulo != null && nivelesTitulo.Count > 0)
                        {
                            foreach (NivelTitulo nivelTitulo in nivelesTitulo)
                            {
                                <option value="@nivelTitulo._idNivel">@nivelTitulo._nombreNivel</option>
                            }
                        }
                    </select>
                </th>
                <th>
                    <select class="cbInsticionesParaCarrera form-control" name="cbInsticionesParaCarrera">
                        @if (institucionesEducativas != null && institucionesEducativas.Count > 0)
                        {
                            string pais = ""; bool abierto = false;
                            foreach (InstitucionEducativa institucion in institucionesEducativas)
                            {
                                if (pais != institucion._pais._pais)
                                {
                                    pais = institucion._pais._pais;
                                    if (abierto == true)
                                    {
                                        new HtmlString("</optgroup>");
                                        abierto = false;
                                    }
                                    @(new HtmlString("<optgroup label='" + pais + "'>"));
                                    abierto = true;
                                }
                                <option value="@institucion._idInstitucion">@institucion._nombre</option>
                            }
                            if (abierto == true)
                            {
                                @(new HtmlString("</optgroup>"));
                            }
                        }
                    </select>
                </th>
                <th>
                    <button class="btn btnAgregarCarreraIndividual">Agregar</button>
                </th>
            </tr>
        </thead>
        <tbody>
            
        </tbody>
    </table>
</div>
